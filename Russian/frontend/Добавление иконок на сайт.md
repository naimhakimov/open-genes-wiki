<h2>Спрайты, добавление и сборка иконок</h2>
<p>Все иконки на сайте собираются в спрайтсеты. Спрайтсет — svg файл со спрайтами в виде тегов <strong>&lt;symbol&gt;</strong> с уникальными <strong>id</strong>. Спрайты из исходников собирает модуль svg-sprite. Исходники иконок хранятся в <strong>src/assets/images/icons/source</strong>. Исходники представляют из себя файлы в формате простого svg без лишних мета тегов. В папке source иконки сгруппированы по папкам. Названия папок соответствуют названиям скопилированных спрайтсетов. Скомпилированные спрайтсеты при сборке сохраняются в папке <strong>src/assets/images/icons/symbol</strong>.</p>
<p>Использование на сайте</p>

```angular2html
<app-icon icon="search"
          size="sm"
></app-icon>
```

<h2>Как добавить иконку в спрайтсет</h2>
<ol>
  <li>
    <p>Подготовьте иконку. Пропустите этот шаг, если вы скачали иконку из макета. Если вы пользуетесь редактором (Sketch, AI, Inkscape), настоятельно рекомендуется сразу чистить код от ненужного мусора. Обратите внимание на свойство <strong>viewBox</strong>. Лучше всего, если иконка квадратная. Удалите лишние группы <strong>&lt;g&gt;</strong> без свойств и задайте id самому первому родителю. id соответствует названию иконки в спрайтсете.</p>
  </li>
  <li>
    <p>Уберите у элементов все атрибуты fill. Иконка должна краситься стилями. Обратите внимание, если на группе есть <strong>fill=" none"</strong>, его тоже нужно убрать, так как тогда цвет не будет применяться к иконке.</p>
  </li>
  <li>
    <p>Переместите иконку в нужную папку. Названия папок соответствуют названиям скопилированных спрайтсетов. Сейчас на сайте используется следующая структура:</p>
  </li>
  <li>
    <p>Выполните <strong>npm run sprites</strong>. Сборки спрайтов нет в пайплайне, поэтому если вы внесли какие-то изменения в иконки, собранные спрайтсеты нужно добавить в коммит и запушить.</p>
  </li>
  <li>
    <p>Добавьте иконку в мапу с иконками <b>src/app/core/icons/icon-map.ts</b>. Не забудьте добавить иконку (или просто полностью скопируйте всю текущую мапу) в аналогичную мапу документации UI Kit src/app/ui-kit-doc/core/icon-map.ts. Иконку нужно добавить в группу, соответствующую папке/спрайтсету.</p>
  </li>
</ol>
<h2>Отдельные случаи</h2>
<p>Как добавить синоним для иконки</p>
<p>Для поддержки легаси или чтобы добавить ряд синонимичных запоминающихся названий для иконки, в новой иконке можно указать ссылку на уже существующую иконку. Для этого нужно сделать следующее:</p>

- Создать новый файл .svg с иконкой, добавить иконку согласно инструкции выше.
- Внутри SVG прописать ссылку на другую иконку из того же набора спрайтов, используя <strong>xmlns:xlink</strong>. <br>Пример:

```svg
<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 24 24" version="1.1"xmlns=" "xmlns:xlink=" ">
  <use xmlns=" " 
  xmlns:xlink=" " 
  xlink:href="#user-s"/> 
</svg>
```
    
В примере для иконки <strong>user-strikethrough</strong> добавлено более запоминающееся короткое название <strong>user-s</strong>.

<h2>Использование CSS переменных в иконках</h2>
<p>Имена CSS переменных для иконок должны начинаться с префикса svg-, чтобы избежать переопределения других переменных. Переменные заводятся и переопределяются в мапе <strong>src/app/core/icons/icon-map.ts</strong>.</p>
<p>В SVG переменные CSS используются таким же образом, как и в CSS.</p>
<p>Пример:</p>

```html
fill="var(--svg-color-error)"
```

<h2>Баги и решения</h2>
<table>
  <tbody>
    <tr>
      <td rowspan="1" colspan="1">
        <p>Баг</p>
      </td>
      <td rowspan="1" colspan="1">
        <p>&nbsp;</p>
      </td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1">
        <p>Иконка одного цвета во всех темах</p>
      </td>
      <td rowspan="1" colspan="1">
        <p>Где-то задан цвет в fill.</p>
      </td>
    </tr>
  </tbody>
</table>
<table>
  <tbody>
    <tr>
      <td rowspan="1" colspan="1">
        <p>Иконка не красится</p>
      </td>
      <td rowspan="1" colspan="1">
        <p>Где-то у родителя в SVG задан fill="none".</p>
      </td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1">
        <p>Иконка красится вся в один цвет, а должна частично</p>
      </td>
      <td rowspan="1" colspan="1">
        <p>Либо все фигуры сведены в кривые, либо fill задан у родителя.</p>
      </td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1">
        <p>Добавленных иконок нет на сайте</p>
      </td>
      <td rowspan="1" colspan="1">
        <p>Нужно пересобрать спрайт npm run sprites, затем обязательно перезапустить ng serve</p>
      </td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1">
        <p>Локально все изменения видны, а на стенде старый спрайт</p>
      </td>
      <td rowspan="1" colspan="1">
        <p>Это может быть кэш, или неверно решен конфликт при слиянии ветки фичи с develop.</p>
        <p>Нужно попробовать сделать коммит с пересобранными спрайтами.</p>
      </td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1">
        <p>Вместо моей иконки иконка со знаком вопроса</p>
      </td>
      <td rowspan="1" colspan="1">
        <p>Это заглушка. Значит иконка не добавлена в мапу с иконками или неверно указано ее название.</p>
      </td>
    </tr>
  </tbody>
</table>
<h2>Правила нейминга иконок</h2>
<p>Хорошо если имя .svg файла соответствует <strong>id</strong> иконки. Лучше использовать одни и те же термины для описания иконок. Названия даны для примера, в проекте они могут быть другими.</p>
<table>
  <tbody>
    <tr>
      <td rowspan="1" colspan="1">
        <p>Название</p>
      </td>
      <td rowspan="1" colspan="1">
        <p>Тип иконки</p>
      </td>
      <td rowspan="1" colspan="1">
        <p>Пояснение</p>
      </td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1">
        <p>*name*-s</p>
      </td>
      <td rowspan="1" colspan="1">
        <p>Перечеркнутые иконки</p>
      </td>
      <td rowspan="1" colspan="1">
        <p>s — strikethrough</p>
      </td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1">
        <p>colored-*name*</p>
      </td>
      <td rowspan="1" colspan="1">
        <p>Легаси иконки, которые не красятся стилями</p>
      </td>
      <td rowspan="1" colspan="1">
        <p>&nbsp;</p>
      </td>
    </tr>
    <tr>
      <td rowspan="1" colspan="1">
        <p>&nbsp;</p>
      </td>
      <td rowspan="1" colspan="1">
        <p>&nbsp;</p>
      </td>
      <td rowspan="1" colspan="1">
        <p>&nbsp;</p>
      </td>
    </tr>
  </tbody>
</table>